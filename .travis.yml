language: python
python:
- '3.6'
install:
- pip install ansible molecule apache-libcloud testinfra requests google-auth
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
  global:
  - secure: RP9Eohgs47deIqe5YhwN85PJmXEMu3Df/ZNM2rwVOV0nlQeM30fxj8okD5udh08kqD6QTte6khECSCR0woOlZ+dvHAbyiaQPAA6CasJfCpCX9Y/Zyq70WcuMgjIwWi2NXB29Xjv/QlxaGl/pglT46pHT8fdig9naVV6HRQfhCjtzatCZNRDvUPRMVyucQwHsaNQLZSaSsCRvmTL8vMT32JYtHEKUUTtEVZkFQeGr5f/0flKwFJSamBa4I2ROjlFOOHwF7f1YNm8QKj1qshmOPpouffv97W1HIn2FK3zoxEchndhjEapZtwehlQivm5qn9dH5vQ1ALuasEYTPpKsXmNSMtYknTKo14cq3clt6qFWEVRBXO1dalat0K4ILjg/Va0a7Cqe+HDolVpoFkbKKtYrRSYRVR6qio2bwASNIzYAOFII/GoSy6fAiC6SCINatz3n0mumx3BAPQgtfTDjIvYRiOgYwaKPov875AwvAw//Zwe14oed3HG4lCTN63GAgxsyYxUVmFNI8VZzGD+BFEkL2aBB2Sc4//54qG9lnEENYMVW/kwBUZg7Qjr/Ru3N7ZIjJaAaDCS6JkKc4Xm1V7H10MJ/Mew3HPIoQq2AU/Hhyx8ULaREra38c37v4+9A16UIQBoWOwikJ9ywHSw+eWEoTVSS69yAQOmvok84RFeI=
  - secure: DPAQlvWMDuT+NcLAcR7ht5ozPPWvpcqFKIQ47pjVqLviavRFTiZtJFSaNaVl9UZltgotJBE7cGwX+3w8lfTsPc2665/wDVTUIIpntk462s+Gn8BoqxeF56Er37PWqjCueqmekDmyyEUDb5RhgezqJuF0OCaIVpqgob3CQCaNiCEjp0FV+bh+oN1IvWlxshH1awYSTQ395Z6KLIWyVld3YOVW3S78Au1WbsPlJqb736/569hIcmEeQIvhIU+F/URNP5thLHcsx+k6amRBubf+RMCGBX730lageLKNeMhrI/NddokNPQBLjcTUdD3779WGh5LAbCG8RQU0V2f/9XR2d157+pOXXmFhLsx5EdnDidyFDJUvu42VmgykliXXvHSJPXTgJsc5JBAv9oKgSQaUnFAVr/y5qB9sKmKxnQM0cmyNdbqEWVG/HyhemvCgz+2/vk3x6rd+JpQaW8ZS/NJxNmQ6rnd6p3cbmlRtDSWYOTFQWT5mTHqKqEJjS8UCjS5AKwS5uEokVLb5AncHi++YQc5n55QEQPkhTL3kgy/8ZFLSv7PcYleDk3dOYfL5pQYlip+LRtvuKptjEAC55xXItXaeY7JTRY6TIoyxrXRWYiZ0ttRurfG+3Dvxee5NfIGkl9pD4e9nk/8JrrZTz41gmYA0b1/Ldrt0NHEVcQmbVxU=
  - secure: Bm4JwUXO5R2NJFt1I1SETb/ilfEWN8d1eiQffq0emuPMPG5ICittRkYiIvWP3aU5z2jxXGePyScdy0VfYsxI16/KSCoF7ziiYZpofX5SWu7ePG/Q6VonUc97csQQDa1C0wLb5B0EN8p9xQwtWa6CPAocPEjn8YJVYAnWAiDJCF95oUBk4vjBY98OEXthjrChTyQrzRvylDn36hdLcq+V7IUNn+qtMwosd62buoL/jFwPIe5rl/Qxc9qSi3sg6T0HjSvHxFjhH69XNjrPacfKphRGK0K30TpvIqWlE8NFCFN7Ckw5Po9AQepP/bhDnP5ahBSt6cbhp6RHNFKO/CVsoamVgrRlW3xSwC8d+KYU+tDmsM50eKenfH9nlYifCaCM6QkEnQ46bQO5B00z88oiilmfy6vjruifWC8wlxMiJKWxWJY9g9aBWNTg0VkhcrGQHfhA3GRxaqTlXTsklonBMNw4BvrE4NQkHpIfZKQ6gF5kRX7SwiQ1owTzkdO1B7c0jyOlK389jV9C0uNiyglDAl/3VjAh0e/i9YS8Du7DgjKv5dgpJSbZ6oTSaJn2m4oPW2iWWLnmwrJJqD6qi9Ngw72NkIdvkRwzf1QOsX+ZckxSyvmsLp4FrNiDQhdtRyY5eI+ODXsmMX5reuHhv2IgmpsrOPpNePYRD8XoiO3i9Pc=
script:
- molecule create
- molecule converge
- molecule verify
after_script:
- molecule destroy
before_install:
- openssl aes-256-cbc -K $encrypted_a81607098ed7_key -iv $encrypted_a81607098ed7_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
notifications:
  slack:
    rooms:
      secure: Q7FqeFD1wgiLtrB4mQsW7n+9ux5970AFIvsT5CAuoKJSoFDCx5s+7Hc2nq849Vi4qE+BQVf1HhQqY7AS/sVSkasdAV49/xYLq58nvwRD6ZQ23i9vOIzmc5cwXDlWBUoKKt2S4ZEcde8RBQOTSL3SaO0xjrNBnVIw8TwFZU688XFJTuJqfiUZ8AcM2KX5tJdzWvd/z9Wj9M6pmTz+RPxM+U6s6DeNp3bi6CVMMFaxiLgf7kH4EloMJ+5yZfo9q1FhDue52Cy+2HR0hNrU/mwtD8WdWxRiUm/qNPceOGC7bpq/N5G5VxhqvM7Yg9fKaqLOu1e7Yea0tVI17q4sdwWZh6cTR1ZC1/vYff4wBBiJ0+idHtKivjCm3G4/CYa6R+OY6foo7U7766XwF1ZkSLFgWajX+kRbsaTIWiDbY9YPtJqx731WtlWPazzevSf9rYZN54b4m+ApJMFmoH4iY4MVhaQBDGvx/DXhsk2Ol4WjnP+kdcz6k58eOYLLxQWD7FLouHEeVjbEQvh5dQqzncbijd44kgne7hypbevSEfxWbTThOaEbOzjhZpmybCveieUc3UBNWOIpDqxXdNE1DHCEmkLgN5lpiY8AbVyWZ/TN/gsqGZ6E2FkNEEl//dSfYHNDPIadC2ijAqt2BhADrejMqRBaA63E0Bo9GvSTdO1HjjI=
